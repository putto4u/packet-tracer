# vlan 연결 설정

**L3 스위치(3560)**를 중심(Core)에 두고, 하단에 두 대의 **L2 스위치(2960)**를 연결하여 VLAN별로 네트워크를 분리하는 계층 구조입니다. 

---

## 장비별 네트워크 IP 할당 요약

| 장비명 | 인터페이스 | VLAN | IP 주소 | 서브넷 마스크 | 기본 게이트웨이 |
| --- | --- | --- | --- | --- | --- |
| **L3 스위치 (3560)** | SVI (Vlan 10) | 10 | 192.168.10.1 | 255.255.255.0 | - |
| **L3 스위치 (3560)** | SVI (Vlan 20) | 20 | 192.168.20.1 | 255.255.255.0 | - |
| **L2 스위치 1 (2960)** | SVI (Vlan 10) | 10 | 192.168.10.2 | 255.255.255.0 | 192.168.10.1 |
| **L2 스위치 2 (2960)** | SVI (Vlan 20) | 20 | 192.168.20.2 | 255.255.255.0 | 192.168.20.1 |
| **PC 1** | FastEthernet 0 | 10 | **192.168.10.10** | **255.255.255.0** | **192.168.10.1** |
| **PC 2** | FastEthernet 0 | 20 | **192.168.20.10** | **255.255.255.0** | **192.168.20.1** |

---

## 1. L3 스위치 (3560) 설정

3560은 서로 다른 VLAN 간의 데이터를 넘겨주는 '라우팅' 핵심 장비입니다.

```bash
! --- 라우팅 기능 활성화 (가장 중요) ---
ip routing

! --- VLAN 생성 및 이름 지정 ---
vlan 10
 name SALES
vlan 20
 name TECH

! --- VLAN별 게이트웨이(SVI) 설정 ---
interface Vlan10
 ip address 192.168.10.1 255.255.255.0
 no shutdown

interface Vlan20
 ip address 192.168.20.1 255.255.255.0
 no shutdown

! --- 하단 L2 스위치 연결용 트렁크 포트 설정 ---
interface range GigabitEthernet0/1 - 2
 switchport trunk encapsulation dot1q
 switchport mode trunk

```

---

## 2. L2 스위치 1 (2960 - Sales 부서) 설정

VLAN 10번 데이터를 처리하며 PC 1이 연결됩니다.

```bash
vlan 10
 name SALES

! --- 관리용 IP 및 게이트웨이 ---
interface Vlan10
 ip address 192.168.10.2 255.255.255.0
 no shutdown
exit
ip default-gateway 192.168.10.1

! --- 상단 L3 스위치 연결 (Trunk) ---
interface GigabitEthernet0/1
 switchport mode trunk

! --- PC 1 연결 (Access) ---
interface FastEthernet0/1
 switchport mode access
 switchport access vlan 10
 spanning-tree portfast

```

---

## 3. L2 스위치 2 (2960 - Tech 부서) 설정

VLAN 20번 데이터를 처리하며 PC 2가 연결됩니다.

```bash
vlan 20
 name TECH

! --- 관리용 IP 및 게이트웨이 ---
interface Vlan20
 ip address 192.168.20.2 255.255.255.0
 no shutdown
exit
ip default-gateway 192.168.20.1

! --- 상단 L3 스위치 연결 (Trunk) ---
interface GigabitEthernet0/1
 switchport mode trunk

! --- PC 2 연결 (Access) ---
interface FastEthernet0/1
 switchport mode access
 switchport access vlan 20
 spanning-tree portfast

```

---

## 4. PC 최종 설정 및 통신 테스트

### PC 1 설정 (VLAN 10 소속)

* **IP Address:** 192.168.10.10
* **Subnet Mask:** 255.255.255.0
* **Default Gateway:** 192.168.10.1

### PC 2 설정 (VLAN 20 소속)

* **IP Address:** 192.168.20.10
* **Subnet Mask:** 255.255.255.0
* **Default Gateway:** 192.168.20.1

---

### 실전 확인 팁

모든 설정이 완료된 후 PC 1에서 PC 2로 `ping 192.168.20.10`을 수행합니다. 3560에서 `ip routing` 명령어가 빠졌거나, PC의 게이트웨이 주소가 틀리면 통신이 실패하므로 가장 먼저 확인해야 합니다.

Next: L3 스위치 라우팅 테이블 확인 및 트러블슈팅

* 3560 IP 할당
* 2960 관리 IP
* PC 고정 IP 설정
* Inter-VLAN 통신
* 게이트웨이 설정 확인
