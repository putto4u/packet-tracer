## AWS í•˜ì´ë¸Œë¦¬ë“œ ì—°ë™ì„ ìœ„í•œ ì „ ê³„ì¸µ ì´ì¤‘í™” êµ¬ì„± ê°€ì´ë“œ

ì‹¤ì œ ì¥ë¹„ë‚˜ íŒ¨í‚·íŠ¸ë ˆì´ì„œ CLIì— **ë³µì‚¬ ë° ë¶™ì—¬ë„£ê¸°(Paste)** í•  ë•Œ í”„ë¡¬í”„íŠ¸(`Router(config)#` ë“±)ê°€ ì„ì—¬ ë“¤ì–´ê°€ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•´, ì˜¤ì§ ìˆœìˆ˜ ëª…ë ¹ì–´ì™€ ì£¼ì„ìœ¼ë¡œë§Œ êµ¬ì„±ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ê° ì¥ë¹„ì˜ ì„¤ì •ì„ ìˆœì„œëŒ€ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”.

---

### [STEP 1] Router0 ì„¤ì • (ISP 1 ì—°ê²° ë° NAT)

ISP 1ë¼ì¸(111.111.111.2)ì„ ì²˜ë¦¬í•˜ë©°, ë‚´ë¶€ ëª¨ë“  VLAN ëŒ€ì—­ì˜ ì¸í„°ë„· í†µì‹ ì„ ì§€ì›í•©ë‹ˆë‹¤.

```bash
enable
configure terminal
hostname Router0

! --- ì™¸ë¶€ ISP 1 ì¸í„°í˜ì´ìŠ¤ í™œì„±í™” ---
interface GigabitEthernet0/0
 description Link_to_ISP1
 ip address 111.111.111.2 255.255.255.252
 ip nat outside
 no shutdown
exit

! --- ë‚´ë¶€ ë°±ë³¸(SW0, SW1) ì—°ê²° ì¸í„°í˜ì´ìŠ¤ ---
interface GigabitEthernet0/1
 ip address 172.16.1.1 255.255.255.0
 ip nat inside
 no shutdown
exit

interface GigabitEthernet0/2
 ip address 172.16.4.1 255.255.255.0
 ip nat inside
 no shutdown
exit

! --- ê¸°ë³¸ ê²½ë¡œ ë° NAT(PAT) ì„¤ì • ---
ip route 0.0.0.0 0.0.0.0 111.111.111.1
access-list 1 permit 192.168.0.0 0.0.255.255
ip nat inside source list 1 interface GigabitEthernet0/0 overload

! --- OSPF ë™ì  ë¼ìš°íŒ… ì„¤ì • ---
router ospf 1
 network 172.16.1.0 0.0.0.255 area 0
 network 172.16.4.0 0.0.0.255 area 0
 default-information originate
end
write memory

```

---

### [STEP 2] Router1 ì„¤ì • (ISP 2 ì—°ê²° ë° ë¡œë“œë°¸ëŸ°ì‹±)

ISP 2ë¼ì¸(222.222.222.2)ì„ í†µí•´ íŠ¸ë˜í”½ì„ ë¶„ì‚° ì²˜ë¦¬í•˜ë©° ì™¸ë¶€ ê°€ìš©ì„±ì„ í™•ë³´í•©ë‹ˆë‹¤.

```bash
enable
configure terminal
hostname Router1

! --- ì™¸ë¶€ ISP 2 ì¸í„°í˜ì´ìŠ¤ í™œì„±í™” ---
interface GigabitEthernet0/0
 description Link_to_ISP2
 ip address 222.222.222.2 255.255.255.252
 ip nat outside
 no shutdown
exit

! --- ë‚´ë¶€ ë°±ë³¸(SW0, SW1) ì—°ê²° ì¸í„°í˜ì´ìŠ¤ ---
interface GigabitEthernet0/1
 ip address 172.16.3.1 255.255.255.0
 ip nat inside
 no shutdown
exit

interface GigabitEthernet0/2
 ip address 172.16.2.1 255.255.255.0
 ip nat inside
 no shutdown
exit

! --- ê¸°ë³¸ ê²½ë¡œ ë° NAT(PAT) ì„¤ì • ---
ip route 0.0.0.0 0.0.0.0 222.222.222.1
access-list 1 permit 192.168.0.0 0.0.255.255
ip nat inside source list 1 interface GigabitEthernet0/0 overload

! --- OSPF ë™ì  ë¼ìš°íŒ… ì„¤ì • ---
router ospf 1
 network 172.16.2.0 0.0.0.255 area 0
 network 172.16.3.0 0.0.0.255 area 0
 default-information originate
end
write memory

```

---

### [STEP 3] SW0 ì„¤ì • (L3 Core Active / Priority 110)

ëª¨ë“  VLANì— ëŒ€í•´ **Active ê²Œì´íŠ¸ì›¨ì´** ì—­í• ì„ ìˆ˜í–‰í•˜ë©°, `priority 110`ìœ¼ë¡œ ì£¼ë„ê¶Œì„ ê°€ì§‘ë‹ˆë‹¤.

```bash
enable
configure terminal
hostname SW0
ip routing

! --- ë¼ìš°í„° ì—°ê²° (L3 í¬íŠ¸ ì „í™˜) ---
interface GigabitEthernet0/1
 no switchport
 ip address 172.16.1.2 255.255.255.0
 no shutdown
exit

interface GigabitEthernet0/2
 no switchport
 ip address 172.16.3.2 255.255.255.0
 no shutdown
exit

! --- í•˜ë‹¨ L2 ìŠ¤ìœ„ì¹˜ ì—°ê²° (Trunk) ---
interface FastEthernet0/1
 switchport trunk encapsulation dot1q
 switchport mode trunk
 no shutdown
exit

! --- ë‹¤ì¤‘ VLAN(10~120) ìƒì„± ë° HSRP Active ì„¤ì • ---
vlan 10,20,30,40,50,60,70,80,90,100,110,120
exit

! VLAN 10 ì„¤ì • (ë‚˜ë¨¸ì§€ VLANë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ IP/Standby ê·¸ë£¹ ìˆ˜ì •í•˜ì—¬ ì¶”ê°€)
interface Vlan 10
 ip address 192.168.10.2 255.255.255.0
 standby 10 ip 192.168.10.1
 standby 10 priority 110
 standby 10 preempt
 no shutdown
exit

! --- OSPF ë¼ìš°íŒ… ---
router ospf 1
 network 172.16.1.0 0.0.0.255 area 0
 network 172.16.3.0 0.0.0.255 area 0
 network 192.168.0.0 0.0.255.255 area 0
end
write memory

```

---

### [STEP 4] SW1 ì„¤ì • (L3 Core Standby)

SW0 ì¥ì•  ì‹œ íŠ¸ë˜í”½ì„ ìŠ¹ê³„í•˜ëŠ” **Standby** ì¥ë¹„ë¡œ, ê¸°ë³¸ ìš°ì„ ìˆœìœ„(100)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```bash
enable
configure terminal
hostname SW1
ip routing

interface GigabitEthernet0/1
 no switchport
 ip address 172.16.4.2 255.255.255.0
 no shutdown
exit

interface GigabitEthernet0/2
 no switchport
 ip address 172.16.2.2 255.255.255.0
 no shutdown
exit

interface FastEthernet0/1
 switchport trunk encapsulation dot1q
 switchport mode trunk
 no shutdown
exit

! --- ë‹¤ì¤‘ VLAN ìƒì„± ë° HSRP Standby ì„¤ì • ---
vlan 10,20,30,40,50,60,70,80,90,100,110,120
exit

interface Vlan 10
 ip address 192.168.10.3 255.255.255.0
 standby 10 ip 192.168.10.1
 standby 10 priority 100
 standby 10 preempt
 no shutdown
exit

! --- OSPF ë¼ìš°íŒ… ---
router ospf 1
 network 172.16.2.0 0.0.0.255 area 0
 network 172.16.4.0 0.0.0.255 area 0
 network 192.168.0.0 0.0.255.255 area 0
end
write memory

```

---

### [STEP 5] Switch0 ì„¤ì • (L2 Access Switch)

PCê°€ ì—°ê²°ë˜ëŠ” ì¢…ë‹¨ ìŠ¤ìœ„ì¹˜ë¡œ, í¬íŠ¸ ë²ˆí˜¸ì— ëŒ€ì‘í•˜ëŠ” VLANì„ í• ë‹¹í•©ë‹ˆë‹¤.

```bash
enable
configure terminal
hostname Switch0

! --- ìƒë‹¨ L3 ìŠ¤ìœ„ì¹˜ ì—°ê²° (Trunk) ---
interface range GigabitEthernet0/1 - 2
 switchport mode trunk
 no shutdown
exit

! --- VLAN ìƒì„± ë° í¬íŠ¸ í• ë‹¹ (VLAN ì•ìë¦¬ = í¬íŠ¸ ë²ˆí˜¸) ---
vlan 10,20,30,40,50,60,70,80,90,100,110,120
exit

interface FastEthernet0/1
 switchport mode access
 switchport access vlan 10
 no shutdown

interface FastEthernet0/2
 switchport mode access
 switchport access vlan 20
 no shutdown

! (ë‚˜ë¨¸ì§€ í¬íŠ¸ Fa0/3 ~ Fa0/12ë„ ë™ì¼ ê·œì¹™ìœ¼ë¡œ VLAN 30~120 í• ë‹¹)
end
write memory

```

---

## ğŸ’¡ ìµœì¢… ì„¤ê³„ í•µì‹¬ ìš”ì•½

* **HSRP ê°€ìš©ì„±**: `priority 110` ì„¤ì •ì„ í†µí•´ SW0ì´ ì£¼ ê²Œì´íŠ¸ì›¨ì´ê°€ ë˜ë©°, ì¥ì•  ë°œìƒ ì‹œ SW1ì´ ì•½ 3ì´ˆ ì´ë‚´ì— ì„œë¹„ìŠ¤ë¥¼ ì¸ê³„ë°›ìŠµë‹ˆë‹¤.
* **OSPF ë¡œë“œë°¸ëŸ°ì‹±**: ë™ì¼ ë¹„ìš© ë‹¤ì¤‘ ê²½ë¡œ(ECMP)ë¥¼ í™œìš©í•˜ì—¬ ì™¸ë¶€ íŠ¸ë˜í”½ì„ ë‘ ISP íšŒì„ ìœ¼ë¡œ ìë™ ë¶„ì‚°í•©ë‹ˆë‹¤.
* **AWS ì—°ë™ ìµœì í™”**: ì˜¨í”„ë ˆë¯¸ìŠ¤ ëŒ€ì—­(`192.168.x.x`)ì„ ì‚¬ìš©í•˜ì—¬ AWS VPCì˜ í‘œì¤€ ëŒ€ì—­(`10.0.0.0/16`)ê³¼ IPê°€ ê²¹ì¹˜ì§€ ì•Šê²Œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

**[AWS ê³¼ê¸ˆ ì•ˆë‚´]**
AWS Site-to-Site VPN ì‚¬ìš© ì‹œ ì‹œê°„ë‹¹ ì•½ **$0.05**ì˜ ë¹„ìš©ì´ í„°ë„ë§ˆë‹¤ ë°œìƒí•©ë‹ˆë‹¤. ì‹¤ìŠµìš©ì´ë¼ë©´ ì‹¤ìŠµ ì¢…ë£Œ í›„ ë°˜ë“œì‹œ AWS ì½˜ì†”ì—ì„œ VPN ìì›ì„ ì‚­ì œí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

Next Level : í•˜ì´ë¸Œë¦¬ë“œ í´ë¼ìš°ë“œ ë³´ì•ˆì„ ìœ„í•œ ACL ê¸°ë°˜ íŠ¸ë˜í”½ ì œì–´ ë° ë°©í™”ë²½ ì„¤ì •

HSRP Priority 110, OSPF ECMP, L2/L3 Trunking, no shutdown ëª…ì‹œ, í”„ë¡¬í”„íŠ¸ ì œê±° ìŠ¤í¬ë¦½íŠ¸ ì™„ë£Œ
