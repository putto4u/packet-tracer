# R1 — R2

이 과정의 핵심은 각 라우터가 자신이 직접 연결되지 않은 **'건너편 네트워크'**의 정보를 모두 알고 있어야 한다는 점입니다.

---

## 1. 네트워크 구성 및 IP 할당 계획

가장 직관적인 통신 확인을 위해 각 구간의 네트워크 대역을 다르게 설정합니다.

| 장치 | 인터페이스 | IP 주소 | 비고 |
| --- | --- | --- | --- |
| **PC** | NIC | 192.168.10.10/24 | GW: 192.168.10.1 |
| **3560 (L3)** | Fa0/1 (PC 방향) | 192.168.10.1/24 | PC의 게이트웨이 |
| **3560 (L3)** | Fa0/24 (R1 방향) | 10.0.0.2/24 | R1과 연결 |
| **R1 (Router)** | Gi0/0 (SW 방향) | 10.0.0.1/24 | SW와 연결 |
| **R1 (Router)** | Gi0/1 (R2 방향) | 20.0.0.1/24 | R2와 연결 |
| **R2 (Router)** | Gi0/0 (R1 방향) | 20.0.0.2/24 | R1과 연결 |
| **R2 (Router)** | Loopback0 | 2.2.2.2/32 | **최종 목적지** |

---

## 2. 장비별 핵심 설정 스크립트

### ① L3 스위치 (3560)

3560은 자신과 직접 닿지 않는 모든 외부 트래픽을 바로 옆의 R1으로 던집니다.

```bash
3560(config)# ip routing
3560(config)# interface fa0/1
3560(config-if)# no switchport
3560(config-if)# ip address 192.168.10.1 255.255.255.0
3560(config)# interface fa0/24
3560(config-if)# no switchport
3560(config-if)# ip address 10.0.0.2 255.255.255.0
3560(config)# ip route 0.0.0.0 0.0.0.0 10.0.0.1

```

### ② 첫 번째 라우터 (R1)

R1은 양쪽 길을 다 연결해 주는 핵심 다리입니다. **가장 멀리 있는 PC 대역**과 **가장 멀리 있는 R2의 루프백 대역**을 모두 알아야 합니다.

```bash
R1(config)# interface gi0/0
R1(config-if)# ip address 10.0.0.1 255.255.255.0
R1(config)# interface gi0/1
R1(config-if)# ip address 20.0.0.1 255.255.255.0
! --- 경로 설정 ---
R1(config)# ip route 192.168.10.0 255.255.255.0 10.0.0.2  ! PC쪽으로 가는 길
R1(config)# ip route 2.2.2.2 255.255.255.255 20.0.0.2    ! R2 루프백으로 가는 길

```

### ③ 두 번째 라우터 (R2)

R2는 패킷을 받았을 때 다시 PC로 돌려보낼 수 있는 경로(Return Path)만 알면 됩니다.

```bash
R2(config)# interface gi0/0
R2(config-if)# ip address 20.0.0.2 255.255.255.0
R2(config)# interface loopback 0
R2(config-if)# ip address 2.2.2.2 255.255.255.255
! --- 돌아오는 경로 설정 (매우 중요) ---
R2(config)# ip route 192.168.10.0 255.255.255.0 20.0.0.1

```

---

## 3. 통신 성공의 핵심 원리: "지도의 완성"

라우터가 여러 대 연결될 때 핑이 안 나가는 이유는 대부분 **'돌아오는 길'**을 모르기 때문입니다.

1. **가기:** PC  3560  R1  R2 (성공)
2. **오기:** R2가 답장을 주려는데, `192.168.10.10`이 어디 있는지 모르면 패킷을 버립니다.
3. **해결:** R2에게 "192.x 대역은 R1(`20.0.0.1`)에게 물어봐"라고 가르쳐준 것이 위 설정의 핵심입니다.

---

## 4. 실전 팁

"수강생들에게 이렇게 지도하세요. **'라우팅은 목적지까지 가는 길뿐만 아니라, 집으로 돌아오는 길까지 지도에 그려 넣어야 완성이 된다'**고요. 장비가 늘어날수록 각 장비의 `show ip route`를 확인하여 끊어진 구간이 없는지 찾는 것이 진정한 전문가의 역량입니다."

Next: `traceroute`를 이용한 다중 홉(Multi-hop) 경로 추적 분석

* 인터페이스 IP 할당
* 정적 라우팅(Static Route) 완성
* 반환 경로(Return Path) 확인
* Loopback 통신 검증
* hop-by-hop 통신 원리 이해
