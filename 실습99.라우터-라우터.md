## 멀티 홉(Multi-hop) 환경의 인터네트워크 구축 가이드

본 가이드는 PC1(VLAN 10)에서 출발하여 L3 스위치와 두 대의 라우터를 거쳐 PC2에 도달하는 복합 네트워크 구성입니다. 각 장비가 목적지까지의 경로를 모두 알고 있어야 통신이 가능하므로, **정적 라우팅(Static Route)** 설정을 정확히 구성하는 것이 핵심입니다.

---

### 1. 네트워크 구성 정보 (Topology)

| 장비 | 인터페이스 | IP 주소 | 서브넷 마스크 | 연결 대상 |
| --- | --- | --- | --- | --- |
| **PC1** | NIC | 192.168.10.10 | 255.255.255.0 | GW: 192.168.10.1 |
| **L3 스위치** | VLAN 10 (SVI) | 192.168.10.1 | 255.255.255.0 | PC1 게이트웨이 |
|  | Fa0/24 (L3) | 10.0.0.2 | 255.255.255.0 | 라우터1 Gi0/1 연결 |
| **라우터1** | Gi0/1 | 10.0.0.1 | 255.255.255.0 | L3 스위치 연결 |
|  | Gi0/2 | 20.0.0.1 | 255.255.255.0 | 라우터2 Gi0/0 연결 |
| **라우터2** | Gi0/0 | 20.0.0.2 | 255.255.255.0 | 라우터1 Gi0/2 연결 |
|  | Gi0/1 | 172.10.10.1 | 255.255.255.0 | PC2 게이트웨이 |
| **PC2** | NIC | 172.10.10.10 | 255.255.255.0 | GW: 172.10.10.1 |

---

### 2. 장비별 환경 설정 (Configuration)

#### **① L3 스위치 (3560) 설정**

내부망 통신을 처리하고 모든 외부 트래픽을 라우터1로 던집니다.

```bash
Switch(config)# ip routing
Switch(config)# vlan 10
Switch(config)# interface vlan 10
Switch(config-if)# ip address 192.168.10.1 255.255.255.0
Switch(config-if)# no shutdown

Switch(config)# interface fastEthernet 0/24
Switch(config-if)# no switchport
Switch(config-if)# ip address 10.0.0.2 255.255.255.0
Switch(config-if)# no shutdown

# 모든 모르는 트래픽은 라우터1(10.0.0.1)로 전송
Switch(config)# ip route 0.0.0.0 0.0.0.0 10.0.0.1

```

#### **② 라우터1 (2911) 설정**

중계 라우터로서 왼쪽(PC1)과 오른쪽(PC2) 방향의 경로를 모두 지정해야 합니다.

```bash
Router1(config)# interface gigabitEthernet 0/1
Router1(config-if)# ip address 10.0.0.1 255.255.255.0
Router1(config-if)# no shutdown

Router1(config)# interface gigabitEthernet 0/2
Router1(config-if)# ip address 20.0.0.1 255.255.255.0
Router1(config-if)# no shutdown

# 라우팅 설정
Router1(config)# ip route 192.168.10.0 255.255.255.0 10.0.0.2  # PC1 방향
Router1(config)# ip route 172.10.10.0 255.255.255.0 20.0.0.2   # PC2 방향

```

#### **③ 라우터2 (2911) 설정**

PC2의 게이트웨이 역할을 하며, 왼쪽(PC1)으로 가는 경로를 지정합니다.

```bash
Router2(config)# interface gigabitEthernet 0/0
Router2(config-if)# ip address 20.0.0.2 255.255.255.0
Router2(config-if)# no shutdown

Router2(config)# interface gigabitEthernet 0/1
Router2(config-if)# ip address 172.10.10.1 255.255.255.0
Router2(config-if)# no shutdown

# 모든 모르는 트래픽(PC1 포함)은 라우터1(20.0.0.1)로 전송
Router2(config)# ip route 0.0.0.0 0.0.0.0 20.0.0.1

```

---

### 3. 통신 확인 및 트러블슈팅

1. **Step-by-Step Ping 테스트:**
* PC1 → 192.168.10.1 (L3 스위치 성공 여부)
* PC1 → 10.0.0.1 (라우터1 성공 여부)
* PC1 → 20.0.0.2 (라우터2 성공 여부)
* PC1 → 172.10.10.10 (PC2 최종 성공)


2. **Traceroute 활용:** `tracert 172.10.10.10` (Windows) 명령어를 통해 어느 지점에서 패킷이 끊기는지 확인합니다.
3. **라우팅 테이블 확인:** 각 장비에서 `show ip route`를 입력하여 목적지 대역이 경로(Next-hop)와 함께 존재하는지 대조하십시오.

---

### 4. 실전 팁: 정적 라우팅의 핵심

이 구성에서 가장 많이 하는 실수는 **"가는 길은 만들고 오는 길은 안 만드는 것"**입니다. 라우터1과 라우터2 모두 양쪽 끝단(192.168.10.0 및 172.10.10.0)에 대한 경로 정보를 반드시 가지고 있어야만 왕복 통신이 가능합니다.

---


