# Project Report: AWS Hybrid Cloud Integration Ready Enterprise Network

---

## 1. 프로젝트 개요 (Project Overview)

### 1.1 프로젝트 명

**AWS 하이브리드 클라우드 통합을 대비한 고가용성 엔터프라이즈 네트워크 인프라 구축**

### 1.2 프로젝트 배경 및 목적

기업의 IT 인프라가 온프레미스에서 클라우드로 확장됨에 따라, 안정적인 하이브리드 클라우드 환경을 지원하는 네트워크 아키텍처가 필수적입니다. 본 프로젝트는 향후 **AWS(Amazon Web Services)와의 연동(VPN, Direct Connect)**을 전제로, IP 주소 충돌을 방지하고 단일 장애 지점(SPOF)이 없는 고가용성(High Availability) 사내 네트워크를 설계 및 구축하는 것을 목적으로 합니다.

### 1.3 구축 환경

* **Simulation Tool:** Cisco Packet Tracer
* **Hardware:**
* **Router:** Cisco 2911 (ISR G2) - Edge & WAN
* **L3 Switch:** Cisco 3560-24PS - Core & Distribution
* **L2 Switch:** Cisco 2960-24TT - Access Layer



---

## 2. 네트워크 설계 핵심 전략 (Design Strategy)

### 2.1 AWS 연동을 고려한 IP 주소 설계 (IP Planning)

AWS VPC의 기본 대역인 `10.0.0.0/16`과의 라우팅 충돌을 원천 차단하기 위해, 사내망 IP 주소 체계를 엄격히 분리하였습니다.

* **AWS 예약 대역:** `10.x.x.x` (본 프로젝트 내 사용 금지)
* **Backbone & WAN:** `172.16.x.x` (장비 간 연결 및 라우팅 정보 교환)
* **HQ Internal (VLAN):** `192.168.x.x` (부서별/서버별 세분화)
* **Branch Internal:** `192.170.x.x` (지사 확장 대역)

### 2.2 고가용성(HA) 및 이중화 구현

* **Core Layer 이중화:** 두 대의 L3 스위치(MSW1, MSW2)를 배치하고 **HSRP(Hot Standby Router Protocol)**를 구성하여, 장비 장애 시 즉각적인 게이트웨이 절체(Failover)를 보장합니다.
* **WAN 회선 이중화:** ISP 1과 ISP 2로 나가는 이중 경로를 확보하고, Edge Router(R1, R2) 간 OSPF 경로 비용 자동 계산을 통해 최적 경로 및 우회 경로를 제공합니다.

### 2.3 보안 및 트래픽 분리 (VLAN Segmentation)

부서별, 기능별로 브로드캐스트 도메인을 분리하여 보안성을 강화하고 불필요한 트래픽을 제어했습니다.

| 위치 | VLAN ID | VLAN 이름 | 용도/할당 |
| --- | --- | --- | --- |
| **HQ** | 10 | Dept_Imwon_Mkt | 임원실, 마케팅팀 |
|  | 20 | Server_Farm | 사내 서버팜 (그룹웨어, 메일 등) |
|  | 30 | Dept_Strategy | 전략기획팀 |
|  | 40 | Dept_RnD | 연구개발(R&D)팀 |
|  | 50 | Spare | 예비/기타 |
| **Branch** | 150/160 | Branch_User | 지사 사용자 그룹 |
|  | 170/180 | Branch_Service | 지사 서비스 및 기타 |

---

## 3. 기술적 구현 상세 (Technical Implementation)

### 3.1 FHRP (First Hop Redundancy Protocol) 구성

Gateway 이중화를 위해 MSW1을 Active, MSW2를 Standby로 설정하였습니다.

* **MSW1 (Active):** Priority를 기본값보다 높은 **110**으로 설정하고, `Preempt` 기능을 활성화하여 장비 복구 시 즉시 Master 권한을 회수하도록 구성.
* **MSW2 (Standby):** Priority **100** 유지.

### 3.2 OSPF (Open Shortest Path First) 라우팅

* **단일 Area 0 구성:** 본사 및 지사 전체를 백본 영역(Area 0)으로 묶어 고속 수렴(Convergence)을 유도했습니다.
* **Default Information Originate:** Edge Router(R1, R2)에서 인터넷으로 나가는 기본 경로(Default Route)를 내부 OSPF 네이버들에게 자동으로 전파하여, 내부 장비들이 별도의 정적 경로 설정 없이 인터넷 통신이 가능하도록 했습니다.

### 3.3 NAT/PAT (Network Address Translation)

* **보안 강화:** 사설 IP 대역이 외부 인터넷에 직접 노출되지 않도록 Edge Router에서 **PAT(Port Address Translation)**를 적용했습니다.
* **ACL 적용:** `192.168.0.0` 및 `172.16.0.0` 대역의 트래픽만 NAT 변환을 허용하여 비인가 트래픽의 외부 통신 시도를 차단했습니다.

### 3.4 Access Layer 최적화

* **PortFast 설정:** PC 및 서버가 연결되는 Access Port에 `Spanning-tree Portfast`를 적용하여, 단말 연결 시 포트가 즉시 Forwarding 상태로 전환되도록 하여 DHCP 할당 지연 등의 문제를 방지했습니다.

---

## 4. 트러블슈팅 및 문제 해결 (Problem Solving)

### 4.1 HSRP Active/Standby 핑퐁 현상 방지

* **문제:** 장비 재부팅 시 MSW1이 복구되었음에도 Active 권한을 가져오지 못하는 현상 예상.
* **해결:** `standby 1 preempt` 명령어를 명시적으로 입력하여, 우선순위가 높은 MSW1이 살아나면 즉시 Active 상태를 선점하도록 조치함.

### 4.2 AWS 대역 충돌 사전 방지

* **문제:** 일반적으로 많이 사용하는 `10.x.x.x` 대역 사용 시 추후 VPN 연결 시 라우팅 테이블 충돌 우려.
* **해결:** 설계 단계에서 `10.0.0.0/8` 전체 대역을 사용 금지(Reserved) 처리하고, `172.16` 및 `192.168` 대역으로 IP Schema를 재설계하여 확장성 확보.

---

## 5. 결론 및 기대 효과 (Conclusion)

본 프로젝트를 통해 구축된 네트워크 인프라는 다음과 같은 강점을 가집니다.

1. **클라우드 네이티브 준비 완료:** AWS와의 Site-to-Site VPN 또는 Direct Connect 연결 시 즉시 연동 가능한 IP 구조를 갖추었습니다.
2. **비즈니스 연속성 보장:** ISP 회선 장애, Core 스위치 장애 등 물리적 장애 발생 시에도 서비스 중단 없는 네트워크 환경을 제공합니다.
3. **확장성:** 계층형(Hierarchical) 설계를 통해 향후 지사 추가나 부서 확장이 용이합니다.

이러한 설계를 바탕으로 향후 AWS VPC 내의 EC2 인스턴스와 온프레미스 서버 간의 하이브리드 아키텍처를 안정적으로 운용할 수 있습니다.

---

**Next Level :**

* AWS VPC 생성 및 IGW/VGW 구성
* 온프레미스 Edge Router(R1, R2)와 AWS VGW 간의 IPSec VPN 터널링 구현
