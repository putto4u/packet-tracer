본 구성은 본사 서버 팜의 이중화 아키텍처와 지사 간의 라우팅을 포함한 8계층 네트워크 설계안입니다.

---

## 전사 네트워크 아키텍처 구성표

| 계층 | 구분 | 주요 장비 | 주요 설정 정보 | 비고 |
| --- | --- | --- | --- | --- |
| **8계층** | 사용자 PC | PC 150/160 | 192.170.150.x, 192.170.160.x | 지사 사용자 |
| **7계층** | 지사 Access | 2960 Switch (x2) | Access Mode (VLAN 150, 160) | L2 스위칭 |
| **6계층** | 지사 Distribution | 3560 L3 Switch | SVI (192.170.150.1, 160.1) | VLAN 간 라우팅 |
| **5계층** | 지사 Edge | 2911 Router | G0/0 (외부), G0/1~2 (내부) | 본사 연결 (172.16.x.x) |
| **4계층** | 본사 Edge | 2911 Router | G0/0 (외부), G0/1~2 (백본 연결) | 지사 연결 및 NAT |
| **3계층** | 본사 Core | 3560 L3 (A, B) | HSRP (VIP: 192.168.20.1) | 게이트웨이 이중화 |
| **2계층** | 본사 Access | 2960 Switch | VLAN 20 Trunk & Load Balance | 서버 집합 스위치 |
| **1계층** | 서버 팜 | Server 5 ~ 9 | 192.168.20.10 ~ 192.168.20.90 | 서비스 제공 계층 |

---

## 장비별 세부 설정 가이드

### 1. 본사 서버 영역 및 백본 이중화 (Layer 1~3)

**[3560 L3 백본 A & B: HSRP 설정]**
서버들의 게이트웨이 가용성을 위해 HSRP 그룹을 설정합니다. 백본 A가 장애가 나면 B가 즉시 가상 IP(`192.168.20.1`)를 인계받습니다.

* **백본 A (Primary/Active):**
```bash
interface Vlan20
 ip address 192.168.20.2 255.255.255.0
 standby 20 ip 192.168.20.1
 standby 20 priority 110
 standby 20 preempt

```


* **백본 B (Secondary/Standby):**
```bash
interface Vlan20
 ip address 192.168.20.3 255.255.255.0
 standby 20 ip 192.168.20.1
 standby 20 preempt

```



**[2960 L2 스위치: 서버 연결]**

* 상위 L3 백본 스위치들과는 `trunk` 모드로 연결하여 VLAN 20 정보를 공유하며, 서버 포트는 `access` 모드로 할당합니다.

---

### 2. 본사-지사 라우팅 및 엣지 구간 (Layer 4~5)

본사와 지사 라우터 간의 인터페이스 IP를 할당하고 상호 대역을 알 수 있도록 라우팅을 설정합니다.

**[본사 2911 라우터]**

* **인터페이스:** G0/0(172.16.100.1/24), G0/1(172.16.10.1/24), G0/2(172.16.20.1/24)
* **라우팅:** 지사 내부 대역(`192.170.x.x`)을 지사 라우터 IP로 보냅니다.
```bash
ip route 192.170.150.0 255.255.255.0 172.16.100.2
ip route 192.170.160.0 255.255.255.0 172.16.100.2

```



**[지사 2911 라우터]**

* **인터페이스:** G0/0(172.16.100.2/24), G0/1(172.16.110.1/24), G0/2(172.16.120.1/24)
* **라우팅:** 본사 서버 대역으로 가는 경로를 설정합니다.
```bash
ip route 192.168.20.0 255.255.255.0 172.16.100.1

```



---

### 3. 지사 내부 네트워크 (Layer 6~8)

**[지사 3560 L3 스위치]**
사용자 VLAN에 대한 라우팅 종단점(SVI)을 설정합니다.

```bash
vlan 150,160
interface Vlan150
 ip address 192.170.150.1 255.255.255.0
interface Vlan160
 ip address 192.170.160.1 255.255.255.0
ip routing

```

**[지사 PC 및 L2 스위치]**

* **PC 150-1, 2:** IP `192.170.150.10~11`, Gateway `192.170.150.1`
* **PC 160-1, 2:** IP `192.170.160.10~11`, Gateway `192.170.160.1`

---

### AWS 도입 시 유료 과금 항목 안내

해당 환경을 AWS 클라우드로 확장하거나 연동할 경우 다음과 같은 서비스 비용이 발생합니다.

1. **Site-to-Site VPN:** 본사-지사 간 보안 터널링 시 시간당 약 **$0.05**의 연결 비용 발생.
2. **AWS Direct Connect:** 전용선 연결 시 포트 시간당 비용 및 데이터 전송량에 따른 비용 발생.
3. **VPC Peering/Transit Gateway:** 리전 간 또는 VPC 간 데이터 전송 시 GB당 과금.

**Next Level : 본사-지사 간 OSPF 동적 라우팅 구성 및 트래픽 제어(ACL)**

HSRP | Static Route | SVI 설정 | Trunk 포트
