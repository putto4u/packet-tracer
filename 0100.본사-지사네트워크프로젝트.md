본 구성은 2개의 ISP 회선부터 최하위 서버 팜까지 모든 경로에 이중화와 로드 밸런싱을 적용한 엔터프라이즈 네트워크 아키텍처입니다. 특히 백본과 하위 VLAN 구간 사이에 L2 스위치를 배치하여 가용성을 극대화하였습니다.

---

## 전사 이중화 네트워크 구성 및 IP 할당표

| 계층 | 장비 명칭 | 인터페이스 | 할당 IP (가상 공인/사설) | 비고 |
| --- | --- | --- | --- | --- |
| **ISP 계층** | **인터넷 라우터 A/B** | 외부(G0/0) / 내부(G0/1) | **211.100.10.1 / 218.200.20.1** | 이중 ISP 회선 구성 |
| **외부 연결** | **2960 L2 스위치 (x2)** | 인터넷-백본 연결 | Trunk / Access | 인터넷 구간 로드밸런싱 |
| **핵심 백본** | **3560 백본 A/B** | 인터넷(G0/1) / 내부(VLAN) | 172.16.1.2 / 172.16.1.3 | HSRP 기반 핵심 라우팅 |
| **내부 연결** | **2960 L2 스위치 (VLAN별)** | 백본-사용자 연결 | 로드밸런스 (Redundant) | 각 VLAN별 전용 스위치 배정 |
| **사용자/서버** | **VLAN 10~90** | 내부 호스트 | 192.168.10.x ~ 90.x | 서비스 및 사용자 구간 |
| **지사 연결** | **2911 지사 라우터** | 본사방향(G0/0) | 172.16.3.1 | 본-지사 간 라우팅 |

---

## 장비별 환경설정 가이드

### 1. 3560 백본 스위치 A 설정 (VLAN 10~40 우선권)

```bash
hostname Backbone-A
ip routing

! --- VLAN 생성 및 HSRP 설정 (10~40 Active) ---
vlan 10,20,30,40,50,60,70,80,90
exit

interface Vlan10
 ip address 192.168.10.2 255.255.255.0
 standby 10 ip 192.168.10.1
 standby 10 priority 110
 standby 10 preempt
! (VLAN 20, 30, 40 동일하게 priority 110 설정)

interface Vlan50
 ip address 192.168.50.2 255.255.255.0
 standby 50 ip 192.168.50.1
 standby 50 priority 100
! (VLAN 60~90 동일하게 priority 100 설정)

! --- 하위 VLAN별 2960 L2 스위치 로드밸런스 연결 (Trunk) ---
interface range GigabitEthernet0/10 - 24
 switchport trunk encapsulation dot1q
 switchport mode trunk
 spanning-tree vlan 10-40 root primary
 spanning-tree vlan 50-90 root secondary

! --- 상위 인터넷 및 지사 라우터 연결 ---
interface GigabitEthernet0/1
 no switchport
 ip address 172.16.1.2 255.255.255.0
interface GigabitEthernet0/2
 no switchport
 ip address 172.16.3.2 255.255.255.0

! --- 이중 인터넷 라우팅 (Floating Static) ---
ip route 0.0.0.0 0.0.0.0 172.16.1.1 10   ! 인터넷 A 주경로
ip route 0.0.0.0 0.0.0.0 172.16.1.4 20   ! 인터넷 B 백업

```

### 2. 3560 백본 스위치 B 설정 (VLAN 50~90 우선권)

```bash
hostname Backbone-B
ip routing

! --- VLAN 생성 및 HSRP 설정 (50~90 Active) ---
vlan 10,20,30,40,50,60,70,80,90
exit

interface Vlan10
 ip address 192.168.10.3 255.255.255.0
 standby 10 ip 192.168.10.1
 standby 10 priority 100
! (VLAN 20~40 동일하게 priority 100 설정)

interface Vlan50
 ip address 192.168.50.3 255.255.255.0
 standby 50 ip 192.168.50.1
 standby 50 priority 110
 standby 50 preempt
! (VLAN 60~90 동일하게 priority 110 설정)

! --- 하위 VLAN별 2960 L2 스위치 로드밸런스 연결 (Trunk) ---
interface range GigabitEthernet0/10 - 24
 switchport trunk encapsulation dot1q
 switchport mode trunk
 spanning-tree vlan 50-90 root primary
 spanning-tree vlan 10-40 root secondary

! --- 인터페이스 및 라우팅 설정 ---
interface GigabitEthernet0/1
 no switchport
 ip address 172.16.1.3 255.255.255.0
interface GigabitEthernet0/2
 no switchport
 ip address 172.16.3.3 255.255.255.0

ip route 0.0.0.0 0.0.0.0 172.16.1.4 10   ! 인터넷 B 주경로
ip route 0.0.0.0 0.0.0.0 172.16.1.1 20   ! 인터넷 A 백업

```

---

## 계층별 로드 밸런싱 상세 매커니즘

1. **인터넷 구간 로드 밸런싱:** 백본 A는 ISP A(인터넷 라우터 A)를, 백본 B는 ISP B를 우선 사용하도록 플로팅 스태틱 라우팅을 설정하여 외부 나가는 트래픽을 분산합니다.
2. **내부 VLAN 로드 밸런싱:** HSRP를 통해 VLAN 10~40 트래픽은 백본 A로, VLAN 50~90 트래픽은 백본 B로 향하게 유도합니다.
3. **L2 스위치 구간 가용성:** 각 VLAN별로 배치된 2960 스위치는 두 대의 백본 스위치와 각각 연결(Dual-Homing)되어 있으며, STP(Spanning Tree Protocol) 조절을 통해 트래픽 경로를 최적화합니다.

---

### AWS 전환 시 발생 가능한 유료 과금 항목

본 온프레미스 구조를 AWS 클라우드로 확장 시 다음과 같은 **유료 서비스**를 고려해야 합니다.

* **Amazon EC2 인스턴스:** 서버 5~9번을 가상화할 경우 인스턴스 타입별 시간당 비용 발생.
* **Elastic IP:** 인터넷 라우터의 공인 IP 역할을 수행하며, 사용 중인 IP에 대해 소액의 시간당 비용이 발생할 수 있습니다.
* **AWS Shield Advanced:** 인터넷 구간의 대규모 DDoS 공격 방어를 위해 선택 시 월별 고정 비용 및 데이터 전송료 발생.

**Next Level : 본사-지사 간 VPN 터널링 및 데이터 암호화 설정**

HSRP 로드밸런싱 | 이중 ISP 구성 | VLAN별 L2 스위칭 | 플로팅 스태틱 라우팅
